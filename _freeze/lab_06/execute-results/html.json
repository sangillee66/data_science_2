{
  "hash": "5d8c9959f99a68dc0f88c3bb7cb74840",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Lab06: 데이터 탐색하기\"\nauthor: 이상일(서울대학교 지리교육과 교수), 김세창(사회교육과 지리전공 석사), 김우형(사회교육과 지리전공 석사과정)\nnumber-sections: true\nformat: \n  html: \n    toc: true\n    embed-resources: true\ncode-link: true\ncode-copy: true\nexecute: \n  warning: false\n  error: false\n  freeze: auto\neditor: visual\nbibliography: references.bib\n---\n\n\n## 실습 규칙 {.smaller}\n\n<br/>\n\n-   구글 검색, ChatGPT, 이전 실습 자료 등을 참고할 수 있습니다.\n-   실습에서 다루지 않은 기능들은 문제마다 따로 설명이 되어 있습니다.\n\n## 실습 준비\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggrepel)\nwpp_2022 <- read_rds(\"wpp_2022.rds\")\n```\n:::\n\n\n## 연습 문제 {.smaller}\n\n<br/>\n\nUN에 따르면 2023년 4월 인도의 인구가 중국의 인구를 넘어섰습니다. 중국의 심각한 출산율 저하로 인해 두 국가의 인구 수 차이는 앞으로 더 커질 것으로 전망됩니다. 1950년부터 2100년까지의 두 국가의 인구 수를 시각화하여 이러한 경향을 파악해 보겠습니다.\n\n<br/>\n\n-   `wpp_2022`의 `pop_jul_total` 데이터를 활용하세요.\n\n-   `scale_y_continuous()`를 활용하면 y축의 설정을 변경할 수 있습니다. 쉼표를 사용해 숫자를 끊어 가독성을 높이기 위해 어떤 아규먼트가 필요한지 검색을 통해 찾아보세요.\n\n-   `theme()`을 통해 세부 사항도 조정해보세요. (선 굵기, 테마, 범례의 위치, 굵은 제목 등)\n\n## 연습 문제\n\n::: panel-tabset\n## Graph\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](lab_06_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n## Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwpp_2022 |> \n  filter(region_name == \"India\" | region_name == \"China\") |> \n  select(region_name, year, pop_jul_total) |> \n  ggplot(aes(x = year, y = pop_jul_total, color = region_name)) +\n  geom_line(size = 1.0) +\n  labs(title = \"Population Growth of China and India 1950 - 2100\",\n       subtitle = \"India has overtaken China as the world's most populous country\",\n       x = \"Year\",\n       y = \"Population(thousands)\",\n       color = \"Country\",\n       caption = \"Your Name, Department of AI-Integrated Education at SNU\") +\n  theme_bw() +\n  theme(legend.position = c(0.1, 0.7),\n        plot.title = element_text(face = \"bold\")) +\n  scale_y_continuous(labels = scales::comma)\n```\n:::\n\n:::\n\n## 문제 1 {.smaller}\n\n<br/>\n\n1950년에서 2100년까지 UN의 SDG Region별 인구 성장률의 변화를 한 눈에 알아보고자 합니다. 인구 성장률 0은 회색 점선으로 표시되어 있습니다.\n\n<br/>\n\n-   `wpp_2022`의 `PGR` 데이터를 활용하세요.\n-   `geom_hline()`을 사용하면 플롯에 가로줄을 그릴 수 있습니다. 문제와 똑같은 선을 그리기 위해서는 어떤 아규먼트들이 필요할지 검색을 통해 찾아보세요.\n\n## 문제 1\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwpp_2022 |> \n  filter(type == \"SDG region\" | type == \"World\") |> \n  select(region_name, year, PGR) |> \n  ggplot(aes(x = year, y = PGR)) +\n  geom_line() +\n  facet_wrap(~region_name) +\n  geom_hline(yintercept = 0, linetype = \"dashed\", color = \"gray\") +\n  labs(title = \"Popultaion Growth Rate Trends from 1950 to 2100\",\n       subtitle = \"Comparative Analysis Across SDG Regions and Global Patterns\",\n       x = \"Year\",\n       y = \"Population Growth Rate (%)\",\n       caption = \"Your Name, Department of AI-Integrated Education at SNU\") +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](lab_06_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n## 문제 2 {.smaller}\n\n<br/>\n\n1950년부터 2100년까지 국가별 합계출산율을 25년단위로 박스플롯으로 나타내어 전 세계의 합계출산율이 시간이 지남에 따라 어떻게 변화하는지 파악하고자 합니다. 추가적으로 각 시기별로 합계출산율이 가장 높은 국가를 라벨링해 보겠습니다. 대체출산율 2.1은 빨간색 점선으로 그려져 있습니다.\n\n<br/>\n\n-   `wpp_2022`의 `TFR` 데이터를 활용하세요.\n-   `%in%`을 사용하면 `filter()` 함수를 보다 효과적으로 사용할 수 있습니다. 아래의 두 개는 똑같은 결과를 보입니다.\n    -   `filter(year == 1950 | year == 1975 | year == 2000)`\n    -   `filter(year %in% c(1950, 1975, 2000))`\n-   `geom_hline()`을 사용하면 플롯에 가로줄을 그릴 수 있습니다. 문제와 똑같은 선을 그리기 위해서는 어떤 아규먼트들이 필요할지 검색을 통해 찾아보세요.\n\n## 문제 2\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwpp_2022_tfr <- wpp_2022 |> \n  filter(year %in% c(1950, 1975, 2000, 2025, 2050, 2075, 2100) & type == \"Country/Area\") |>\n  select(year, region_name, TFR)\n\nwpp_2022_tfr |> \n  ggplot(aes(group = year, x = year, y = TFR)) + \n  geom_boxplot() +\n  geom_label_repel(data = wpp_2022_tfr |> \n                     group_by(year) |> \n                     slice_max(TFR, n = 1), aes(label = region_name)) +\n  geom_hline(yintercept = 2.1, linetype = \"dashed\", color = \"red\", size = 1) +\n  labs(title = \"Total Fertility Rate by Country from 1950 to 2100\",\n       subtitle = \"With Replacement Fertility Rate Emphasized\",\n       x = \"Year\",\n       y = \"Total Fertility Rate(TFR)\",\n       caption = \"Your Name, Department of AI-Integrated Education at SNU\") +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](lab_06_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n## 문제 3 {.smaller}\n\n<br/>\n\n1950년에서 2100년까지 25년 단위로 UN의 SDG Region별 인구가 전 세계 인구에서 차지하는 비중을 확인하고자 합니다.\n\n<br/>\n\n-   `wpp_2022`의 `pop_jul_total` 데이터를 활용하세요.\n-   `geom_bar()`의 아규먼트인 `stat = \"identity\"`를 사용하면 y축의 높이를 빈도가 아닌 데이터의 값을 기반으로 설정해줍니다.\n-   `scale_y_continuous()`를 활용하면 y축의 설정을 변경할 수 있습니다. y축의 값을 백분율로 나타내기 위해 어떤 아규먼트가 필요한지 검색을 통해 찾아보세요.\n\n## 문제 3\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwpp_2022 |> \n  filter(type == \"SDG region\" & year %in% c(1950, 1975, 2000, 2025, 2050, 2075, 2100)) |> \n  select(region_name, year, pop_jul_total) |> \n  group_by(year) |> \n  mutate(prop = pop_jul_total / sum(pop_jul_total)) |> \n  ggplot(aes(x = year, y = prop, fill = region_name)) +\n  geom_bar(stat = \"identity\", position = \"fill\") +\n  scale_y_continuous(labels = scales::percent) +\n  labs(title = \"World Population Proportions by SDG Region, from 1950 to 2100\",\n       x = \"Year\",\n       y = \"Population Proportion (%)\",\n       fill = \"SDG Region\",\n       caption = \"Your Name, Department of AI-Integrated Education at SNU\") +\n  theme(legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![](lab_06_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "lab_06_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}